<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="/css.css"/>
		<title>Bin</title>
	</head>
	<body data-path="/">
		{{if .Logged}}
			<header>
				<b>Bin</b>
				<form action="/logout" method="post">
					<button type="submit" class="button">Log Out</button>
				</form>
				<a href="/new" class="button">New file</a>
				<a href="/new/Untitled.treb" class="button">New spreadsheet</a>
				<button id="newFolder" class="button">New Folder</button>
				<span class="divider"></span>
				<form action="/upload/" method="post" enctype="multipart/form-data" id="upload_form">
					<label for="upload" class="button">Choose file</label>
					<span id="file_chosen"></span>
					<input type="file" name="upload" id="upload">
					<button type="submit" class="button">Upload</button>
				</form>
			</header>
			<h2>My Bin</h2>
			<ul>
				{{range .File.FolderContents}}
					<li><a href="javascript:;" class="remove" data-filename="{{base .Path}}">❌</a>
						<a href="javascript:;" class="move" data-filename="{{base .Path}}">Move</a>
						{{if eq .Filetype 0}}📄{{else}}📁{{end}}<a href="/file{{.Path}}">{{.Name}}</a></li>
				{{end}}
			</ul>
			<script src="/static/folderScript.js"></script>
		{{else}}
			<h2>Bin - Log In</h2>
			<a href="/newUser" class="button">New Account</a><br><br>
			<form action="/login" method="POST">
				Username:<br><input type="text" name="username"/><br>
				Password:<br><input type="password" name="password"/><br>
				<br>
				<button type="submit" class="button">Log In</button>
			</form>
		{{end}}
	</body>
</html>

